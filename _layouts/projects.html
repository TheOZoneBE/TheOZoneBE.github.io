---
layout: page
---
{%- include featured_projects.html -%}

<div class="ui horizontal section divider">
    <div class="ui massive primary label">
        All projects
    </div>
</div>

<div class="ui segment">
    <div class="ui fluid icon input">
        <input placeholder="Search for a project" type="text">
        <i class="search icon"></i>
    </div>
</div>

<div class="ui container">
    <div class="ui two stackable centered cards">
        {%- for project in site.projects -%}
            {%- include project_view.html project=project -%}
        {%- endfor -%}
    </div>
</div>

<script>
    $(document).ready(function () {
        let searchParams = new URLSearchParams(window.location.search);

        $.getJSON("/projects/filtering.json").done(filtering => {
            let all = filtering.all;
            let tags = all;
            let langs = all;
            let stats = all;
            if (searchParams.has("tag")) {
                tags = filtering.tag[searchParams.get("tag")];
            }
            if (searchParams.has("lang")) {
                langs = filtering.lang[searchParams.get("lang")];
            }
            if (searchParams.has("status")) {
                stats = filtering.status[searchParams.get("status")];
            }

            let filtered = tags.filter(el => langs.includes(el) && stats.includes(el));
            let others = all.filter(el => ! filtered.includes(el));

            $("div.ui.two.stackable.centered.cards a.ui.special.card").filter((index, el) => others.includes(el.id)).hide();
            $("div.ui.two.stackable.centered.cards a.ui.special.card").filter((index, el) => filtered.includes(el.id)).transition("fade in");
        });
        if (searchParams.has("tag")) {}
    });
</script>